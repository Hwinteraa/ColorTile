<!DOCTYPE html>
<html lang="kr">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>word</title>
    <link rel="stylesheet" href="../style.css">
    <style></style>
</head>

<body>
    <!-- header -->
    <header>
        <div class="container">
            <h1>
                <button onclick="window.location.href='../index.html';">GC</button>
            </h1>
        </div>
    </header>
    <!-- //end header -->
    <!-- PortFolio -->
    <section id="portfolio" class="portfolio">
        <div class="container">
            <div class="title">
                <h4>2022100290</h4>
                <h2>word-relay</h2>
            </div>
            <div><span id="order">1</span>번째 참가자</div>
            <div>제시어: <span id="word"></span></div>
            <input type="text">
            <button>입력</button>

            <div>history: <span id="history"></span></div>

            <!--<div class="portfolio-me">
            <div class="portfolio-inner">
            <img src="이미지 넣을 거라면 350*230.png">-->
        </div>
    </section>
    <!-- //end PortFolio -->
<!--</body>-->

    <script>
            const number = Number(prompt('참여인원(숫자만 작성)'));

            // [수정] .portfolio 클래스 내부의 button을 찾도록 변경
            const $button = document.querySelector('.portfolio button');
            const $input = document.querySelector('input');
            const $word = document.querySelector('#word');
            const $order = document.querySelector('#order');
            const $history = document.querySelector('#history');

            let word; // 제시어
            let newWord; // 현재 단어

        const onClickButton = () => {
            // 입력값이 없는 경우 방어 코드 (newWord가 undefined일 수 있음)
            if (!newWord || newWord.trim() === '') {
                alert('단어를 입력해주세요.');
            $input.focus();
            return;
            }

            if (!word || word[word.length - 1] === newWord[0]) { // 제시어가 비어 있거나 입력한 단어가 올바른가
                // 비어 있다
                word = newWord; // 입력한 단어가 제시어가 된다.
            $word.textContent = word; // 화면에 제시어 표시

            // order 증가 또는 초기화 후 표시
            const order = Number($order.textContent);

            // 히스토리 표시
            $history.textContent += newWord + '(' + $order.textContent + ') '; // 가독성을 위해 띄어쓰기 추가

                if (order + 1 > number) {
                $order.textContent = 1;
                } else {
                $order.textContent = order + 1;
                }

            // 다음 턴 준비
            $input.value = '';
            $input.focus();
            newWord = ''; // 입력 후 newWord 초기화 (중복 입력 방지)
            }
            else { // 올바르지 않다
                alert('올바르지 않은 단어입니다.');
            $input.value = '';
            $input.focus();
            newWord = ''; // 실패 시에도 초기화
            }
        };

            $button.addEventListener('click', onClickButton);

        const onInput = (event) => {
                newWord = event.target.value; // 입력하는 단어를 현재 단어로
        };

            $input.addEventListener('input', onInput);

        // [추가] 엔터키를 눌렀을 때도 버튼 클릭과 같은 동작 실행
        $input.addEventListener('keydown', (event) => {
            if (event.key === 'Enter') {
                onClickButton();
            }
        });
</script>
</body>
</html>
